<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Login</title>
</head>

<body>
    </h1>
    <p>You have successfully logged in with Google.</p>
</body>
<script>
    (
        async () => {
            try {
                const response = await fetch('<%= betterAuthUrl %>/api/auth/sign-in/social', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        provider: 'google',
                        callbackURL: '<%= callbackURL %>'
                    })
                });
                const data = await response.json();
                if (response.ok) {
                    window.location.href = data.url;
                } else {
                    document.body.innerHTML = `<div>
                            <h2>Google Login Failed</h2>
                            <p>${data.message}</p>
                        </div>`;
                }
            } catch (error) {
                document.body.innerHTML = `<div> 
            
            <p>
                Error occurred during Google login: ${error.message}
                </p>
            </div>`
            }
        }
    )();

</script>

</html>